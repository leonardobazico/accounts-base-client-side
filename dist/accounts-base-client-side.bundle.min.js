(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var meteorInstall=Package.modules.meteorInstall;var Buffer=Package.modules.Buffer;var process=Package.modules.process;var Symbol=Package["ecmascript-runtime"].Symbol;var Map=Package["ecmascript-runtime"].Map;var Set=Package["ecmascript-runtime"].Set;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Random;var require=meteorInstall({node_modules:{meteor:{random:{"random.js":function(require){if(Meteor.isServer)var nodeCrypto=Npm.require("crypto");var Alea=function Alea(){function Mash(){var n=4022871197;var mash=function mash(data){data=data.toString();for(var i=0;i<data.length;i++){n+=data.charCodeAt(i);var h=.02519603282416938*n;n=h>>>0;h-=n;h*=n;n=h>>>0;h-=n;n+=h*4294967296}return(n>>>0)*2.3283064365386963e-10};mash.version="Mash 0.9";return mash}return function(args){var s0=0;var s1=0;var s2=0;var c=1;if(args.length==0){args=[+new Date]}var mash=Mash();s0=mash(" ");s1=mash(" ");s2=mash(" ");for(var i=0;i<args.length;i++){s0-=mash(args[i]);if(s0<0){s0+=1}s1-=mash(args[i]);if(s1<0){s1+=1}s2-=mash(args[i]);if(s2<0){s2+=1}}mash=null;var random=function random(){var t=2091639*s0+c*2.3283064365386963e-10;s0=s1;s1=s2;return s2=t-(c=t|0)};random.uint32=function(){return random()*4294967296};random.fract53=function(){return random()+(random()*2097152|0)*1.1102230246251565e-16};random.version="Alea 0.9";random.args=args;return random}(Array.prototype.slice.call(arguments))};var UNMISTAKABLE_CHARS="23456789ABCDEFGHJKLMNPQRSTWXYZabcdefghijkmnopqrstuvwxyz";var BASE64_CHARS="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"+"0123456789-_";var RandomGenerator=function RandomGenerator(type,options){var self=this;self.type=type;if(!RandomGenerator.Type[type]){throw new Error("Unknown random generator type: "+type)}if(type===RandomGenerator.Type.ALEA){if(!options.seeds){throw new Error("No seeds were provided for Alea PRNG")}self.alea=Alea.apply(null,options.seeds)}};RandomGenerator.Type={NODE_CRYPTO:"NODE_CRYPTO",BROWSER_CRYPTO:"BROWSER_CRYPTO",ALEA:"ALEA"};RandomGenerator.prototype.fraction=function(){var self=this;if(self.type===RandomGenerator.Type.ALEA){return self.alea()}else if(self.type===RandomGenerator.Type.NODE_CRYPTO){var numerator=parseInt(self.hexString(8),16);return numerator*2.3283064365386963e-10}else if(self.type===RandomGenerator.Type.BROWSER_CRYPTO){var array=new Uint32Array(1);window.crypto.getRandomValues(array);return array[0]*2.3283064365386963e-10}else{throw new Error("Unknown random generator type: "+self.type)}};RandomGenerator.prototype.hexString=function(digits){var self=this;if(self.type===RandomGenerator.Type.NODE_CRYPTO){var numBytes=Math.ceil(digits/2);var bytes;try{bytes=nodeCrypto.randomBytes(numBytes)}catch(e){bytes=nodeCrypto.pseudoRandomBytes(numBytes)}var result=bytes.toString("hex");return result.substring(0,digits)}else{return this._randomString(digits,"0123456789abcdef")}};RandomGenerator.prototype._randomString=function(charsCount,alphabet){var self=this;var digits=[];for(var i=0;i<charsCount;i++){digits[i]=self.choice(alphabet)}return digits.join("")};RandomGenerator.prototype.id=function(charsCount){var self=this;if(charsCount===undefined)charsCount=17;return self._randomString(charsCount,UNMISTAKABLE_CHARS)};RandomGenerator.prototype.secret=function(charsCount){var self=this;if(charsCount===undefined)charsCount=43;return self._randomString(charsCount,BASE64_CHARS)};RandomGenerator.prototype.choice=function(arrayOrString){var index=Math.floor(this.fraction()*arrayOrString.length);if(typeof arrayOrString==="string")return arrayOrString.substr(index,1);else return arrayOrString[index]};var height=typeof window!=="undefined"&&window.innerHeight||typeof document!=="undefined"&&document.documentElement&&document.documentElement.clientHeight||typeof document!=="undefined"&&document.body&&document.body.clientHeight||1;var width=typeof window!=="undefined"&&window.innerWidth||typeof document!=="undefined"&&document.documentElement&&document.documentElement.clientWidth||typeof document!=="undefined"&&document.body&&document.body.clientWidth||1;var agent=typeof navigator!=="undefined"&&navigator.userAgent||"";function createAleaGeneratorWithGeneratedSeed(){return new RandomGenerator(RandomGenerator.Type.ALEA,{seeds:[new Date,height,width,agent,Math.random()]})}if(Meteor.isServer){Random=new RandomGenerator(RandomGenerator.Type.NODE_CRYPTO)}else{if(typeof window!=="undefined"&&window.crypto&&window.crypto.getRandomValues){Random=new RandomGenerator(RandomGenerator.Type.BROWSER_CRYPTO)}else{Random=createAleaGeneratorWithGeneratedSeed()}}Random.createWithSeeds=function(){for(var _len=arguments.length,seeds=Array(_len),_key=0;_key<_len;_key++){seeds[_key]=arguments[_key]}if(seeds.length===0){throw new Error("No seeds were provided")}return new RandomGenerator(RandomGenerator.Type.ALEA,{seeds:seeds})};Random.insecure=createAleaGeneratorWithGeneratedSeed()},"deprecated.js":function(){Meteor.uuid=function(){var HEX_DIGITS="0123456789abcdef";var s=[];for(var i=0;i<36;i++){s[i]=Random.choice(HEX_DIGITS)}s[14]="4";s[19]=HEX_DIGITS.substr(parseInt(s[19],16)&3|8,1);s[8]=s[13]=s[18]=s[23]="-";var uuid=s.join("");return uuid}}}}}},{extensions:[".js",".json"]});require("./node_modules/meteor/random/random.js");require("./node_modules/meteor/random/deprecated.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package.random={},{Random:Random})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var Hook;(function(){Hook=function(options){var self=this;options=options||{};self.nextCallbackId=0;self.callbacks={};self.bindEnvironment=true;if(options.bindEnvironment===false)self.bindEnvironment=false;if(options.exceptionHandler)self.exceptionHandler=options.exceptionHandler;else if(options.debugPrintExceptions){if(!_.isString(options.debugPrintExceptions))throw new Error("Hook option debugPrintExceptions should be a string");self.exceptionHandler=options.debugPrintExceptions}};_.extend(Hook.prototype,{register:function(callback){var self=this;var exceptionHandler=self.exceptionHandler||function(exception){throw exception};if(self.bindEnvironment){callback=Meteor.bindEnvironment(callback,exceptionHandler)}else{callback=dontBindEnvironment(callback,exceptionHandler)}var id=self.nextCallbackId++;self.callbacks[id]=callback;return{stop:function(){delete self.callbacks[id]}}},each:function(iterator){var self=this;Meteor._nodeCodeMustBeInFiber();var ids=_.keys(self.callbacks);for(var i=0;i<ids.length;++i){var id=ids[i];if(_.has(self.callbacks,id)){var callback=self.callbacks[id];if(!iterator(callback))break}}}});var dontBindEnvironment=function(func,onException,_this){if(!onException||typeof onException==="string"){var description=onException||"callback of async function";onException=function(error){Meteor._debug("Exception in "+description+":",error&&error.stack||error)}}return function(){var args=_.toArray(arguments);var runAndHandleExceptions=function(){try{var ret=func.apply(_this,args)}catch(e){onException(e)}return ret};return runAndHandleExceptions()}}}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["callback-hook"]={},{Hook:Hook})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Random=Package.random.Random;(function(){var key="_localstorage_test_"+Random.id();var retrieved;try{if(window.localStorage){window.localStorage.setItem(key,key);retrieved=window.localStorage.getItem(key);window.localStorage.removeItem(key)}}catch(e){}if(key===retrieved){Meteor._localStorage={getItem:function(key){return window.localStorage.getItem(key)},setItem:function(key,value){window.localStorage.setItem(key,value)},removeItem:function(key){window.localStorage.removeItem(key)}}}if(!Meteor._localStorage){Meteor._debug("You are running a browser with no localStorage or userData "+"support. Logging in from one tab will not cause another "+"tab to be logged in.");Meteor._localStorage={_data:{},setItem:function(key,val){this._data[key]=val},removeItem:function(key){delete this._data[key]},getItem:function(key){var value=this._data[key];if(value===undefined)return null;else return value}}}}).call(this);if(typeof Package==="undefined")Package={};Package.localstorage={}})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var _=Package.underscore._;var Tracker=Package.tracker.Tracker;var Deps=Package.tracker.Deps;var Random=Package.random.Random;var Hook=Package["callback-hook"].Hook;var DDP=Package["ddp-client"].DDP;var Mongo=Package.mongo.Mongo;var meteorInstall=Package.modules.meteorInstall;var Buffer=Package.modules.Buffer;var process=Package.modules.process;var Symbol=Package["ecmascript-runtime"].Symbol;var Map=Package["ecmascript-runtime"].Map;var Set=Package["ecmascript-runtime"].Set;var meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;var Promise=Package.promise.Promise;var Accounts,EXPIRE_TOKENS_INTERVAL_MS,CONNECTION_CLOSE_DELAY_MS;var require=meteorInstall({node_modules:{meteor:{"accounts-base":{"client_main.js":["./accounts_client.js","./url_client.js","./localstorage_token.js",function(require,exports,module){module.export({AccountsClient:function(){return AccountsClient},AccountsTest:function(){return AccountsTest}});var AccountsClient;module.import("./accounts_client.js",{AccountsClient:function(v){AccountsClient=v}});var AccountsTest;module.import("./url_client.js",{AccountsTest:function(v){AccountsTest=v}});module.import("./localstorage_token.js");Accounts=new AccountsClient;Meteor.users=Accounts.users}],"accounts_client.js":["babel-runtime/helpers/classCallCheck","babel-runtime/helpers/possibleConstructorReturn","babel-runtime/helpers/inherits","./accounts_common.js",function(require,exports,module){module.export({AccountsClient:function(){return AccountsClient}});var _classCallCheck;module.import("babel-runtime/helpers/classCallCheck",{default:function(v){_classCallCheck=v}});var _possibleConstructorReturn;module.import("babel-runtime/helpers/possibleConstructorReturn",{default:function(v){_possibleConstructorReturn=v}});var _inherits;module.import("babel-runtime/helpers/inherits",{default:function(v){_inherits=v}});var AccountsCommon;module.import("./accounts_common.js",{AccountsCommon:function(v){AccountsCommon=v}});var AccountsClient=function(_AccountsCommon){_inherits(AccountsClient,_AccountsCommon);function AccountsClient(options){_classCallCheck(this,AccountsClient);var _this=_possibleConstructorReturn(this,_AccountsCommon.call(this,options));_this._loggingIn=false;_this._loggingInDeps=new Tracker.Dependency;_this._loginServicesHandle=_this.connection.subscribe("meteor.loginServiceConfiguration");_this._pageLoadLoginCallbacks=[];_this._pageLoadLoginAttemptInfo=null;_this._initUrlMatching();_this._initLocalStorage();return _this}AccountsClient.prototype.userId=function(){function userId(){return this.connection.userId()}return userId}();AccountsClient.prototype._setLoggingIn=function(){function _setLoggingIn(x){if(this._loggingIn!==x){this._loggingIn=x;this._loggingInDeps.changed()}}return _setLoggingIn}();AccountsClient.prototype.loggingIn=function(){function loggingIn(){this._loggingInDeps.depend();return this._loggingIn}return loggingIn}();AccountsClient.prototype.logout=function(){function logout(callback){var self=this;self.connection.apply("logout",[],{wait:true},function(error,result){if(error){callback&&callback(error)}else{self.makeClientLoggedOut();callback&&callback()}})}return logout}();AccountsClient.prototype.logoutOtherClients=function(){function logoutOtherClients(callback){var self=this;self.connection.apply("getNewToken",[],{wait:true},function(err,result){if(!err){self._storeLoginToken(self.userId(),result.token,result.tokenExpires)}});self.connection.apply("removeOtherTokens",[],{wait:true},function(err){callback&&callback(err)})}return logoutOtherClients}();return AccountsClient}(AccountsCommon);var Ap=AccountsClient.prototype;Meteor.loggingIn=function(){return Accounts.loggingIn()};Ap.callLoginMethod=function(options){var self=this;options=_.extend({methodName:"login",methodArguments:[{}],_suppressLoggingIn:false},options);_.each(["validateResult","userCallback"],function(f){if(!options[f])options[f]=function(){}});var loginCallbacks=_.once(function(error){if(!error){self._onLoginHook.each(function(callback){callback();return true})}else{self._onLoginFailureHook.each(function(callback){callback({error:error});return true})}options.userCallback.apply(this,arguments)});var reconnected=false;var onResultReceived=function onResultReceived(err,result){if(err||!result||!result.token){}else{self.connection.onReconnect=function(){reconnected=true;var storedToken=self._storedLoginToken();if(storedToken){result={token:storedToken,tokenExpires:self._storedLoginTokenExpires()}}if(!result.tokenExpires)result.tokenExpires=self._tokenExpiration(new Date);if(self._tokenExpiresSoon(result.tokenExpires)){self.makeClientLoggedOut()}else{self.callLoginMethod({methodArguments:[{resume:result.token}],_suppressLoggingIn:true,userCallback:function(){function userCallback(error){var storedTokenNow=self._storedLoginToken();if(error){if(storedTokenNow&&storedTokenNow===result.token){self.makeClientLoggedOut()}}loginCallbacks(error)}return userCallback}()})}}}};var loggedInAndDataReadyCallback=function loggedInAndDataReadyCallback(error,result){if(reconnected)return;self._setLoggingIn(false);if(error||!result){error=error||new Error("No result from call to "+options.methodName);loginCallbacks(error);return}try{options.validateResult(result)}catch(e){loginCallbacks(e);return}self.makeClientLoggedIn(result.id,result.token,result.tokenExpires);loginCallbacks()};if(!options._suppressLoggingIn)self._setLoggingIn(true);self.connection.apply(options.methodName,options.methodArguments,{wait:true,onResultReceived:onResultReceived},loggedInAndDataReadyCallback)};Ap.makeClientLoggedOut=function(){if(this.connection._userId){this._onLogoutHook.each(function(callback){callback();return true})}this._unstoreLoginToken();this.connection.setUserId(null);this.connection.onReconnect=null};Ap.makeClientLoggedIn=function(userId,token,tokenExpires){this._storeLoginToken(userId,token,tokenExpires);this.connection.setUserId(userId)};Meteor.logout=function(callback){return Accounts.logout(callback)};Meteor.logoutOtherClients=function(callback){return Accounts.logoutOtherClients(callback)};Ap.loginServicesConfigured=function(){return this._loginServicesHandle.ready()};Ap.onPageLoadLogin=function(f){if(this._pageLoadLoginAttemptInfo){f(this._pageLoadLoginAttemptInfo)}else{this._pageLoadLoginCallbacks.push(f)}};Ap._pageLoadLogin=function(attemptInfo){if(this._pageLoadLoginAttemptInfo){Meteor._debug("Ignoring unexpected duplicate page load login attempt info");return}_.each(this._pageLoadLoginCallbacks,function(callback){callback(attemptInfo)});this._pageLoadLoginCallbacks=[];this._pageLoadLoginAttemptInfo=attemptInfo};if(Package.blaze){Package.blaze.Blaze.Template.registerHelper("currentUser",function(){return Meteor.user()});Package.blaze.Blaze.Template.registerHelper("loggingIn",function(){return Meteor.loggingIn()})}}],"accounts_common.js":["babel-runtime/helpers/classCallCheck",function(require,exports,module){module.export({AccountsCommon:function(){return AccountsCommon}});var _classCallCheck;module.import("babel-runtime/helpers/classCallCheck",{default:function(v){_classCallCheck=v}});var AccountsCommon=function(){function AccountsCommon(options){_classCallCheck(this,AccountsCommon);this._options={};this.connection=undefined;this._initConnection(options||{});this.users=new Mongo.Collection("users",{_preventAutopublish:true,connection:this.connection});this._onLoginHook=new Hook({bindEnvironment:false,debugPrintExceptions:"onLogin callback"});this._onLoginFailureHook=new Hook({bindEnvironment:false,debugPrintExceptions:"onLoginFailure callback"});this._onLogoutHook=new Hook({bindEnvironment:false,debugPrintExceptions:"onLogout callback"})}AccountsCommon.prototype.userId=function(){function userId(){throw new Error("userId method not implemented")}return userId}();AccountsCommon.prototype.user=function(){function user(){var userId=this.userId();return userId?this.users.findOne(userId):null}return user}();AccountsCommon.prototype.config=function(){function config(options){var self=this;if(Meteor.isServer){__meteor_runtime_config__.accountsConfigCalled=true}else if(!__meteor_runtime_config__.accountsConfigCalled){Meteor._debug("Accounts.config was called on the client but not on the "+"server; some configuration options may not take effect.")}if(_.has(options,"oauthSecretKey")){if(Meteor.isClient)throw new Error("The oauthSecretKey option may only be specified on the server");if(!Package["oauth-encryption"])throw new Error("The oauth-encryption package must be loaded to set oauthSecretKey");Package["oauth-encryption"].OAuthEncryption.loadKey(options.oauthSecretKey);options=_.omit(options,"oauthSecretKey")}var VALID_KEYS=["sendVerificationEmail","forbidClientAccountCreation","passwordEnrollTokenExpirationInDays","restrictCreationByEmailDomain","loginExpirationInDays","passwordResetTokenExpirationInDays"];_.each(_.keys(options),function(key){if(!_.contains(VALID_KEYS,key)){throw new Error("Accounts.config: Invalid key: "+key)}});_.each(VALID_KEYS,function(key){if(key in options){if(key in self._options){throw new Error("Can't set `"+key+"` more than once")}self._options[key]=options[key]}})}return config}();AccountsCommon.prototype.onLogin=function(){function onLogin(func){return this._onLoginHook.register(func)}return onLogin}();AccountsCommon.prototype.onLoginFailure=function(){function onLoginFailure(func){return this._onLoginFailureHook.register(func)}return onLoginFailure}();AccountsCommon.prototype.onLogout=function(){function onLogout(func){return this._onLogoutHook.register(func)}return onLogout}();AccountsCommon.prototype._initConnection=function(){function _initConnection(options){if(!Meteor.isClient){return}if(options.connection){this.connection=options.connection}else if(options.ddpUrl){this.connection=DDP.connect(options.ddpUrl)}else if(typeof __meteor_runtime_config__!=="undefined"&&__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL){this.connection=DDP.connect(__meteor_runtime_config__.ACCOUNTS_CONNECTION_URL)}else{this.connection=Meteor.connection}}return _initConnection}();AccountsCommon.prototype._getTokenLifetimeMs=function(){function _getTokenLifetimeMs(){return(this._options.loginExpirationInDays||DEFAULT_LOGIN_EXPIRATION_DAYS)*24*60*60*1e3}return _getTokenLifetimeMs}();AccountsCommon.prototype._getPasswordResetTokenLifetimeMs=function(){function _getPasswordResetTokenLifetimeMs(){return(this._options.passwordResetTokenExpirationInDays||DEFAULT_PASSWORD_RESET_TOKEN_EXPIRATION_DAYS)*24*60*60*1e3}return _getPasswordResetTokenLifetimeMs}();AccountsCommon.prototype._getPasswordEnrollTokenLifetimeMs=function(){function _getPasswordEnrollTokenLifetimeMs(){return(this._options.passwordEnrollTokenExpirationInDays||DEFAULT_PASSWORD_ENROLL_TOKEN_EXPIRATION_DAYS)*24*60*60*1e3}return _getPasswordEnrollTokenLifetimeMs}();AccountsCommon.prototype._tokenExpiration=function(){function _tokenExpiration(when){return new Date(new Date(when).getTime()+this._getTokenLifetimeMs())}return _tokenExpiration}();AccountsCommon.prototype._tokenExpiresSoon=function(){function _tokenExpiresSoon(when){var minLifetimeMs=.1*this._getTokenLifetimeMs();var minLifetimeCapMs=MIN_TOKEN_LIFETIME_CAP_SECS*1e3;if(minLifetimeMs>minLifetimeCapMs)minLifetimeMs=minLifetimeCapMs;return new Date>new Date(when)-minLifetimeMs}return _tokenExpiresSoon}();return AccountsCommon}();var Ap=AccountsCommon.prototype;Meteor.userId=function(){return Accounts.userId()};Meteor.user=function(){return Accounts.user()};var DEFAULT_LOGIN_EXPIRATION_DAYS=90;var DEFAULT_PASSWORD_RESET_TOKEN_EXPIRATION_DAYS=3;var DEFAULT_PASSWORD_ENROLL_TOKEN_EXPIRATION_DAYS=30;var MIN_TOKEN_LIFETIME_CAP_SECS=3600;EXPIRE_TOKENS_INTERVAL_MS=600*1e3;CONNECTION_CLOSE_DELAY_MS=10*1e3;Meteor.startup(function(){var ServiceConfiguration=Package["service-configuration"].ServiceConfiguration;Ap.loginServiceConfiguration=ServiceConfiguration.configurations;Ap.ConfigError=ServiceConfiguration.ConfigError});var lceName="Accounts.LoginCancelledError";Ap.LoginCancelledError=Meteor.makeErrorType(lceName,function(description){this.message=description});Ap.LoginCancelledError.prototype.name=lceName;Ap.LoginCancelledError.numericError=145546287}],"localstorage_token.js":["./accounts_client.js",function(require,exports,module){var AccountsClient;module.import("./accounts_client.js",{AccountsClient:function(v){AccountsClient=v}});var Ap=AccountsClient.prototype;Meteor.loginWithToken=function(token,callback){return Accounts.loginWithToken(token,callback)};Ap.loginWithToken=function(token,callback){this.callLoginMethod({methodArguments:[{resume:token}],userCallback:callback})};Ap._enableAutoLogin=function(){this._autoLoginEnabled=true;this._pollStoredLoginToken()};Ap._isolateLoginTokenForTest=function(){this.LOGIN_TOKEN_KEY=this.LOGIN_TOKEN_KEY+Random.id();this.USER_ID_KEY=this.USER_ID_KEY+Random.id()};Ap._storeLoginToken=function(userId,token,tokenExpires){Meteor._localStorage.setItem(this.USER_ID_KEY,userId);Meteor._localStorage.setItem(this.LOGIN_TOKEN_KEY,token);if(!tokenExpires)tokenExpires=this._tokenExpiration(new Date);Meteor._localStorage.setItem(this.LOGIN_TOKEN_EXPIRES_KEY,tokenExpires);this._lastLoginTokenWhenPolled=token};Ap._unstoreLoginToken=function(){Meteor._localStorage.removeItem(this.USER_ID_KEY);Meteor._localStorage.removeItem(this.LOGIN_TOKEN_KEY);Meteor._localStorage.removeItem(this.LOGIN_TOKEN_EXPIRES_KEY);this._lastLoginTokenWhenPolled=null};Ap._storedLoginToken=function(){return Meteor._localStorage.getItem(this.LOGIN_TOKEN_KEY)};Ap._storedLoginTokenExpires=function(){return Meteor._localStorage.getItem(this.LOGIN_TOKEN_EXPIRES_KEY)};Ap._storedUserId=function(){return Meteor._localStorage.getItem(this.USER_ID_KEY)};Ap._unstoreLoginTokenIfExpiresSoon=function(){var tokenExpires=this._storedLoginTokenExpires();if(tokenExpires&&this._tokenExpiresSoon(new Date(tokenExpires))){this._unstoreLoginToken()}};Ap._initLocalStorage=function(){var self=this;self.LOGIN_TOKEN_KEY="Meteor.loginToken";self.LOGIN_TOKEN_EXPIRES_KEY="Meteor.loginTokenExpires";self.USER_ID_KEY="Meteor.userId";var rootUrlPathPrefix=__meteor_runtime_config__.ROOT_URL_PATH_PREFIX;if(rootUrlPathPrefix||this.connection!==Meteor.connection){var namespace=":"+this.connection._stream.rawUrl;if(rootUrlPathPrefix){namespace+=":"+rootUrlPathPrefix}self.LOGIN_TOKEN_KEY+=namespace;self.LOGIN_TOKEN_EXPIRES_KEY+=namespace;self.USER_ID_KEY+=namespace}if(self._autoLoginEnabled){self._unstoreLoginTokenIfExpiresSoon();var token=self._storedLoginToken();if(token){var userId=self._storedUserId();userId&&self.connection.setUserId(userId);self.loginWithToken(token,function(err){if(err){Meteor._debug("Error logging in with token: "+err);self.makeClientLoggedOut()}self._pageLoadLogin({type:"resume",allowed:!err,error:err,methodName:"login",methodArguments:[{resume:token}]})})}}self._lastLoginTokenWhenPolled=token;if(self._pollIntervalTimer){clearInterval(self._pollIntervalTimer)}self._pollIntervalTimer=setInterval(function(){self._pollStoredLoginToken()},3e3)};Ap._pollStoredLoginToken=function(){var self=this;if(!self._autoLoginEnabled){return}var currentLoginToken=self._storedLoginToken();if(self._lastLoginTokenWhenPolled!=currentLoginToken){if(currentLoginToken){self.loginWithToken(currentLoginToken,function(err){if(err){self.makeClientLoggedOut()}})}else{self.logout()}}self._lastLoginTokenWhenPolled=currentLoginToken}}],"url_client.js":["./accounts_client.js",function(require,exports,module){module.export({AccountsTest:function(){return AccountsTest}});var AccountsClient;module.import("./accounts_client.js",{AccountsClient:function(v){AccountsClient=v}});var Ap=AccountsClient.prototype;var accountsPaths=["reset-password","verify-email","enroll-account"];var savedHash=window.location.hash;Ap._initUrlMatching=function(){this._autoLoginEnabled=true;this._accountsCallbacks={};this._attemptToMatchHash()};Ap._attemptToMatchHash=function(){_attemptToMatchHash(this,savedHash,defaultSuccessHandler)};function _attemptToMatchHash(accounts,hash,success){_.each(accountsPaths,function(urlPart){var token;var tokenRegex=new RegExp("^\\#\\/"+urlPart+"\\/(.*)$");var match=hash.match(tokenRegex);if(match){token=match[1];if(urlPart==="reset-password"){accounts._resetPasswordToken=token}else if(urlPart==="verify-email"){accounts._verifyEmailToken=token}else if(urlPart==="enroll-account"){accounts._enrollAccountToken=token}}else{return}window.location.hash="";success.call(accounts,token,urlPart)})}function defaultSuccessHandler(token,urlPart){var self=this;self._autoLoginEnabled=false;Meteor.startup(function(){if(self._accountsCallbacks[urlPart]){self._accountsCallbacks[urlPart](token,function(){self._enableAutoLogin()})}})}var AccountsTest={attemptToMatchHash:function(){function attemptToMatchHash(hash,success){return _attemptToMatchHash(Accounts,hash,success)}return attemptToMatchHash}()};Ap.onResetPasswordLink=function(callback){if(this._accountsCallbacks["reset-password"]){Meteor._debug("Accounts.onResetPasswordLink was called more than once. "+"Only one callback added will be executed.")}this._accountsCallbacks["reset-password"]=callback};Ap.onEmailVerificationLink=function(callback){if(this._accountsCallbacks["verify-email"]){Meteor._debug("Accounts.onEmailVerificationLink was called more than once. "+"Only one callback added will be executed.")}this._accountsCallbacks["verify-email"]=callback};Ap.onEnrollmentLink=function(callback){if(this._accountsCallbacks["enroll-account"]){Meteor._debug("Accounts.onEnrollmentLink was called more than once. "+"Only one callback added will be executed.")}this._accountsCallbacks["enroll-account"]=callback}}]}}}},{extensions:[".js",".json"]});var exports=require("./node_modules/meteor/accounts-base/client_main.js");if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["accounts-base"]=exports,{Accounts:Accounts})})();(function(){var Meteor=Package.meteor.Meteor;var global=Package.meteor.global;var meteorEnv=Package.meteor.meteorEnv;var Accounts=Package["accounts-base"].Accounts;var Mongo=Package.mongo.Mongo;var ServiceConfiguration;(function(){if(typeof ServiceConfiguration==="undefined"){ServiceConfiguration={}}ServiceConfiguration.configurations=new Mongo.Collection("meteor_accounts_loginServiceConfiguration",{_preventAutopublish:true,connection:Meteor.isClient?Accounts.connection:Meteor.connection});ServiceConfiguration.ConfigError=function(serviceName){if(Meteor.isClient&&!Accounts.loginServicesConfigured()){this.message="Login service configuration not yet loaded"}else if(serviceName){this.message="Service "+serviceName+" not configured"}else{this.message="Service not configured"}};ServiceConfiguration.ConfigError.prototype=new Error;ServiceConfiguration.ConfigError.prototype.name="ServiceConfiguration.ConfigError"}).call(this);if(typeof Package==="undefined")Package={};(function(pkg,symbols){for(var s in symbols)s in pkg||(pkg[s]=symbols[s])})(Package["service-configuration"]={},{ServiceConfiguration:ServiceConfiguration})})();Mongo=Package.mongo.Mongo;ReactiveVar=Package["reactive-var"].ReactiveVar;$=Package.jquery.$;jQuery=Package.jquery.jQuery;Tracker=Package.tracker.Tracker;Deps=Package.tracker.Deps;Accounts=Package["accounts-base"].Accounts;Meteor=Package.meteor.Meteor;global=Package.meteor.global;meteorEnv=Package.meteor.meteorEnv;WebApp=Package.webapp.WebApp;_=Package.underscore._;DDP=Package["ddp-client"].DDP;LaunchScreen=Package["launch-screen"].LaunchScreen;Blaze=Package.ui.Blaze;UI=Package.ui.UI;Handlebars=Package.ui.Handlebars;Spacebars=Package.spacebars.Spacebars;Template=Package["templating-runtime"].Template;meteorInstall=Package.modules.meteorInstall;Buffer=Package.modules.Buffer;process=Package.modules.process;Symbol=Package["ecmascript-runtime"].Symbol;Map=Package["ecmascript-runtime"].Map;Set=Package["ecmascript-runtime"].Set;meteorBabelHelpers=Package["babel-runtime"].meteorBabelHelpers;Promise=Package.promise.Promise;Autoupdate=Package.autoupdate.Autoupdate;Reload=Package.reload.Reload;HTML=Package.htmljs.HTML;